version: "1.0.0004"
patterns:
  # Block Logic
  - regex: '--<(!?)(\w+)(?::(\w+))?'
    action: block_start
  - regex: '--\s*<\{\s*(.*?)\s*\}'
    action: block_start_jsonpath
  - regex: '-->|--(\w+)>'
    action: block_end

  # Line Filter Tags
  - regex: '--\s*#\{\s*(.*?)\s*\}'
    action: line_filter_jsonpath
  - regex: '#(!?)(\w+)(?::(!?)(\w+))?'
    action: line_filter

  # Postgres Filter (Legacy support, treated as line filter)
  - regex: '\$1->[$>^&@]*''([^'']+)'''
    action: line_filter_legacy

  # Replace or Delete (Standard SQL params and legacy $)
  - regex: '\B[\$:]([a-zA-Z_]\w*)'
    action: replace_delete

  # Replace or Empty (%key%)
  - regex: '%(\w+)%'
    action: replace_empty
